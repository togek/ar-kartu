<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <style>
      body { margin: 0; overflow: hidden; }
    </style>
  </head>
  <body>
    <a-scene
      mindar-image="imageTargetSrc: https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/card.mind"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
      embedded
    >
      <a-assets>
        <img id="card" src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/card.png" crossorigin="anonymous" />
      </a-assets>

      <!-- Kamera + Cursor -->
      <a-camera position="0 0 0" look-controls="enabled: false" raycaster="objects: .clickable">
        <a-entity cursor="fuse: false; rayOrigin: mouse"
                  position="0 0 -1"
                  geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
                  material="color: white; shader: flat">
        </a-entity>
      </a-camera>

      <!-- âœ… Tombol UI tetap muncul di layar -->
      <a-entity id="ui" position="0 0 -1.5" look-at="[camera]">
        <!-- WhatsApp -->
        <a-image src="https://cdn-icons-png.flaticon.com/512/733/733585.png"
                 position="-0.6 -0.4 0"
                 width="0.2"
                 height="0.2"
                 class="clickable"
                 event-set__enter="_event: click; _target: #wa; visible: false"
                 onclick="window.open('https://wa.me/6281218835991', '_blank')">
        </a-image>

        <!-- Instagram -->
        <a-image src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png"
                 position="0 -0.4 0"
                 width="0.2"
                 height="0.2"
                 class="clickable"
                 onclick="window.open('https://instagram.com/yourusername', '_blank')">
        </a-image>

        <!-- Maps -->
        <a-image src="https://cdn-icons-png.flaticon.com/512/684/684908.png"
                 position="0.6 -0.4 0"
                 width="0.2"
                 height="0.2"
                 class="clickable"
                 onclick="window.open('https://maps.google.com/?q=Your+Business+Location', '_blank')">
        </a-image>
      </a-entity>

      <!-- Marker dengan Video -->
      <a-entity mindar-image-target="targetIndex: 0" id="marker">
        <a-plane src="#card" position="0 0 0" height="0.552" width="1"></a-plane>
        <a-video id="marker-video" src="#dynamicVideo" position="0 0 0.1" width="1" height="0.5625"
                 material="shader: flat; transparent: true; opacity: 1">
        </a-video>
      </a-entity>
    </a-scene>

    <script>
      // Buat video
      const video = document.createElement("video");
      video.setAttribute("id", "dynamicVideo");
      video.setAttribute("src", "video.mp4");
      video.setAttribute("loop", "");
      video.setAttribute("muted", "");
      video.setAttribute("playsinline", "");
      video.crossOrigin = "anonymous";
      document.body.appendChild(video);

      const marker = document.querySelector("#marker");
      const video3D = document.querySelector("#marker-video");

      marker.addEventListener("targetFound", () => {
        video.play().then(() => {
          video3D.setAttribute("visible", "true");
        });
      });

      marker.addEventListener("targetLost", () => {
        video.pause();
        video3D.setAttribute("visible", "false");
      });
    </script>
  </body>
</html>
